<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_31) on Fri Dec 09 17:11:17 PST 2016 -->
<title>CacheDiskImage</title>
<meta name="date" content="2016-12-09">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="CacheDiskImage";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":9,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":9,"i8":10,"i9":9,"i10":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CacheDiskImage.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.Entry.html" title="class in com.barryholroyd.prodlisthpdemo.cache_disk"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.html" target="_top">Frames</a></li>
<li><a href="CacheDiskImage.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.barryholroyd.prodlisthpdemo.cache_disk</div>
<h2 title="Class CacheDiskImage" class="title">Class CacheDiskImage</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.barryholroyd.prodlisthpdemo.cache_disk.CacheDiskImage</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public final class <span class="typeNameLabel">CacheDiskImage</span>
extends java.lang.Object</pre>
<div class="block">Disk cache implementation.
 <p>
 This is based, in part, on the DiskLruCache implementation in the Android source code base.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="https://android.googlesource.com/platform/libcore/+/jb-mr2-release/luni/src/main/java/libcore/io/DiskLruCache.java">
      DiskLruCache Implementation</a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.Entry.html" title="class in com.barryholroyd.prodlisthpdemo.cache_disk">CacheDiskImage.Entry</a></span></code>
<div class="block">The Entry class provides a wrapper containing metadata for each image that might
 be stored in the disk cache.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.html#cacheDirName">cacheDirName</a></span></code>
<div class="block">Full file name for the cache subdirectory.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.html#currentCacheSize">currentCacheSize</a></span></code>
<div class="block">Current sizeBitmap (bytes used) of the disk cache.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.html#entryCounter">entryCounter</a></span></code>
<div class="block">Counter value provides last part of filename.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.html#FILENAME_BASE">FILENAME_BASE</a></span></code>
<div class="block">Base name for image files.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.HashMap&lt;java.lang.String,<a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.Entry.html" title="class in com.barryholroyd.prodlisthpdemo.cache_disk">CacheDiskImage.Entry</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.html#icdHm">icdHm</a></span></code>
<div class="block">Internal key/value mapping for cache storage.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.util.LinkedList&lt;java.lang.String&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.html#icdLl">icdLl</a></span></code>
<div class="block">First in / first out tracking for deleting cache entries.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.html#IMAGE_SIZE_MULTIPLIER">IMAGE_SIZE_MULTIPLIER</a></span></code>
<div class="block">When we need to make room in the cache, we'll make enough for at least this many
 additional images the size of the one being added.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static <a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.html" title="class in com.barryholroyd.prodlisthpdemo.cache_disk">CacheDiskImage</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.html#instance">instance</a></span></code>
<div class="block">Singleton for caching images on disk.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.html#maxCacheSize">maxCacheSize</a></span></code>
<div class="block">Maximum sizeBitmap of the cache in bytes.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private </code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.html#CacheDiskImage-android.app.Activity-java.lang.String-long-">CacheDiskImage</a></span>(android.app.Activity&nbsp;a,
              java.lang.String&nbsp;cacheSubdirName,
              long&nbsp;_maxCacheSize)</code>
<div class="block">Constructor.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.html#add-java.lang.ref.WeakReference-java.lang.String-android.graphics.Bitmap-">add</a></span>(java.lang.ref.WeakReference&lt;android.app.Activity&gt;&nbsp;wrActivity,
   java.lang.String&nbsp;url,
   android.graphics.Bitmap&nbsp;bitmap)</code>
<div class="block">Add an image bitmap to the disk cache.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>private static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.html#deleteFile-java.io.File-">deleteFile</a></span>(java.io.File&nbsp;f)</code>
<div class="block">Delete a file and throw an exception if the deletion fails.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.html#externalStorageAvailable--">externalStorageAvailable</a></span>()</code>
<div class="block">Test for the presence of external storage.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.html#fileCheck-java.io.File-java.lang.String-">fileCheck</a></span>(java.io.File&nbsp;f,
         java.lang.String&nbsp;url)</code>
<div class="block">Check to ensure the specified File object exists and is a normal file.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>android.graphics.Bitmap</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.html#get-java.lang.String-">get</a></span>(java.lang.String&nbsp;url)</code>
<div class="block">Get the image from the disk, if it is present on disk.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.html#getDiskCacheDirName-android.app.Activity-java.lang.String-">getDiskCacheDirName</a></span>(android.app.Activity&nbsp;a,
                   java.lang.String&nbsp;cacheSubdirName)</code>
<div class="block">Get/create a unique subdirectory in the app's standard cache directory.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>private <a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.Entry.html" title="class in com.barryholroyd.prodlisthpdemo.cache_disk">CacheDiskImage.Entry</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.html#getEntry-java.lang.String-">getEntry</a></span>(java.lang.String&nbsp;url)</code>
<div class="block">Get the Entry for the specified URL.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>static <a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.html" title="class in com.barryholroyd.prodlisthpdemo.cache_disk">CacheDiskImage</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.html#makeInstance-android.app.Activity-java.lang.String-long-">makeInstance</a></span>(android.app.Activity&nbsp;a,
            java.lang.String&nbsp;cacheDirName,
            long&nbsp;maxCacheSize)</code>
<div class="block">Standard singleton makeInstance() method.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.html#prSizes-java.lang.String-com.barryholroyd.prodlisthpdemo.cache_disk.CacheDiskImage.Entry-">prSizes</a></span>(java.lang.String&nbsp;tag,
       <a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.Entry.html" title="class in com.barryholroyd.prodlisthpdemo.cache_disk">CacheDiskImage.Entry</a>&nbsp;entry)</code>
<div class="block">Log detailed disk caching information.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.html#setMaxCacheSize-long-">setMaxCacheSize</a></span>(long&nbsp;_maxCacheSize)</code>
<div class="block">Change the maximum disk cache size.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>private static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.html#trace-java.lang.String-">trace</a></span>(java.lang.String&nbsp;msg)</code>
<div class="block">Tracing method specific to the disk cache.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="instance">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>instance</h4>
<pre>private static volatile&nbsp;<a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.html" title="class in com.barryholroyd.prodlisthpdemo.cache_disk">CacheDiskImage</a> instance</pre>
<div class="block">Singleton for caching images on disk.
 <p>
 A singleton is used (as opposed to a set of static methods) because an Activity instance
 is needed to obtain the cache directory and that isn't available at static initialization
 time (and we shouldn't store an Activity instance on a static hook). Beyond that, we don't
 need separate instances.
 <p>
 There are several approaches for implementing singletons. This one is used because
 it can be lazily initialized (i.e., doesn't have to be initialized during static
 initialization at class loading time). The double check lock problem is addressed by
 making the instance "volatile" -- that ensure that the instance is fully initialized
 before becoming visible to any other threads.
 <p>
 Synchronization occurs at a high level, via the get() and add() methods. As a result,
 accesses of lower level entities (such as getEntity(), icdHm and icdLl) do not have
 to be separately synchronized.</div>
</li>
</ul>
<a name="FILENAME_BASE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FILENAME_BASE</h4>
<pre>private static final&nbsp;java.lang.String FILENAME_BASE</pre>
<div class="block">Base name for image files.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#com.barryholroyd.prodlisthpdemo.cache_disk.CacheDiskImage.FILENAME_BASE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="icdHm">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>icdHm</h4>
<pre>private final&nbsp;java.util.HashMap&lt;java.lang.String,<a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.Entry.html" title="class in com.barryholroyd.prodlisthpdemo.cache_disk">CacheDiskImage.Entry</a>&gt; icdHm</pre>
<div class="block">Internal key/value mapping for cache storage.
 This does not have to be synchronized since all accesses of it
 come from within synchronized methods (get() and add()).</div>
</li>
</ul>
<a name="icdLl">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>icdLl</h4>
<pre>private final&nbsp;java.util.LinkedList&lt;java.lang.String&gt; icdLl</pre>
<div class="block">First in / first out tracking for deleting cache entries.
 This does not have to be synchronized since all accesses of it
 come from within add(), which is already synchronized.</div>
</li>
</ul>
<a name="cacheDirName">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cacheDirName</h4>
<pre>private final&nbsp;java.lang.String cacheDirName</pre>
<div class="block">Full file name for the cache subdirectory.</div>
</li>
</ul>
<a name="maxCacheSize">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>maxCacheSize</h4>
<pre>private&nbsp;long maxCacheSize</pre>
<div class="block">Maximum sizeBitmap of the cache in bytes.</div>
</li>
</ul>
<a name="currentCacheSize">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>currentCacheSize</h4>
<pre>private&nbsp;long currentCacheSize</pre>
<div class="block">Current sizeBitmap (bytes used) of the disk cache.</div>
</li>
</ul>
<a name="IMAGE_SIZE_MULTIPLIER">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>IMAGE_SIZE_MULTIPLIER</h4>
<pre>private static final&nbsp;int IMAGE_SIZE_MULTIPLIER</pre>
<div class="block">When we need to make room in the cache, we'll make enough for at least this many
 additional images the size of the one being added.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#com.barryholroyd.prodlisthpdemo.cache_disk.CacheDiskImage.IMAGE_SIZE_MULTIPLIER">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="entryCounter">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>entryCounter</h4>
<pre>private&nbsp;int entryCounter</pre>
<div class="block">Counter value provides last part of filename.
 Can create a few billion unique filenames.
 Must be outside of the Entry definition, since it is static and, as an inner
 class, Entry can't be.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="CacheDiskImage-android.app.Activity-java.lang.String-long-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>CacheDiskImage</h4>
<pre>private&nbsp;CacheDiskImage(android.app.Activity&nbsp;a,
                       java.lang.String&nbsp;cacheSubdirName,
                       long&nbsp;_maxCacheSize)</pre>
<div class="block">Constructor.
 <p>
 We pass in the subdirectory name so that different apps can provide different
 cache subdirectories. Synchronization isn't necessary since this is only called
 from a synchronized block within makeInstance().</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>a</code> - standard Activity instance.</dd>
<dd><code>cacheSubdirName</code> - subdirectory name for the cache -- unique to this app/usage.</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="deleteFile-java.io.File-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteFile</h4>
<pre>private static&nbsp;void&nbsp;deleteFile(java.io.File&nbsp;f)</pre>
<div class="block">Delete a file and throw an exception if the deletion fails.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>f</code> - the File instance for the file to be deleted.</dd>
</dl>
</li>
</ul>
<a name="makeInstance-android.app.Activity-java.lang.String-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>makeInstance</h4>
<pre>public static&nbsp;<a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.html" title="class in com.barryholroyd.prodlisthpdemo.cache_disk">CacheDiskImage</a>&nbsp;makeInstance(android.app.Activity&nbsp;a,
                                          java.lang.String&nbsp;cacheDirName,
                                          long&nbsp;maxCacheSize)</pre>
<div class="block">Standard singleton makeInstance() method.
 <p>
 We avoid the double check lock issue by making the "instance" field "volatile".</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>a</code> - standard Activity instance.</dd>
<dd><code>cacheDirName</code> - subdirectory name for the cache -- unique to this app/usage.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>singleton instance.</dd>
</dl>
</li>
</ul>
<a name="setMaxCacheSize-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMaxCacheSize</h4>
<pre>public static&nbsp;void&nbsp;setMaxCacheSize(long&nbsp;_maxCacheSize)</pre>
<div class="block">Change the maximum disk cache size.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>_maxCacheSize</code> - the maximum cache size.</dd>
</dl>
</li>
</ul>
<a name="get-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>get</h4>
<pre>public&nbsp;android.graphics.Bitmap&nbsp;get(java.lang.String&nbsp;url)</pre>
<div class="block">Get the image from the disk, if it is present on disk.
 If not, get it from the network and cache it.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>url</code> - url for the bitmap.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>bitmap obtained from the URL.</dd>
</dl>
</li>
</ul>
<a name="add-java.lang.ref.WeakReference-java.lang.String-android.graphics.Bitmap-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>add</h4>
<pre>public&nbsp;void&nbsp;add(java.lang.ref.WeakReference&lt;android.app.Activity&gt;&nbsp;wrActivity,
                java.lang.String&nbsp;url,
                android.graphics.Bitmap&nbsp;bitmap)</pre>
<div class="block">Add an image bitmap to the disk cache.

 Delete entries for the cache, if/as necessary.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>wrActivity</code> - the current Activity.</dd>
<dd><code>url</code> - the url for the image to be stored.</dd>
<dd><code>bitmap</code> - the bitmap of the image to be stored.</dd>
</dl>
</li>
</ul>
<a name="prSizes-java.lang.String-com.barryholroyd.prodlisthpdemo.cache_disk.CacheDiskImage.Entry-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prSizes</h4>
<pre>private&nbsp;void&nbsp;prSizes(java.lang.String&nbsp;tag,
                     <a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.Entry.html" title="class in com.barryholroyd.prodlisthpdemo.cache_disk">CacheDiskImage.Entry</a>&nbsp;entry)</pre>
<div class="block">Log detailed disk caching information.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>tag</code> - unique tag to represent the caller.</dd>
<dd><code>entry</code> - the disk cache entry to be logged.</dd>
</dl>
</li>
</ul>
<a name="getDiskCacheDirName-android.app.Activity-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDiskCacheDirName</h4>
<pre>private&nbsp;java.lang.String&nbsp;getDiskCacheDirName(android.app.Activity&nbsp;a,
                                             java.lang.String&nbsp;cacheSubdirName)</pre>
<div class="block">Get/create a unique subdirectory in the app's standard cache directory.
 This uses external storage if there is any mounted; otherwise, it uses
 internal storage.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>a</code> - standard Context instance.</dd>
<dd><code>cacheSubdirName</code> - subdirectory name for the cache -- unique to this app/usage.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>File handle for the cache subdirectory</dd>
</dl>
</li>
</ul>
<a name="fileCheck-java.io.File-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fileCheck</h4>
<pre>private&nbsp;void&nbsp;fileCheck(java.io.File&nbsp;f,
                       java.lang.String&nbsp;url)</pre>
<div class="block">Check to ensure the specified File object exists and is a normal file.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>f</code> - the File object of interest (it is for a bitmap).</dd>
<dd><code>url</code> - the url of the image associated with the bitmap.
              It serves as the unique id for the cached image bitmap.</dd>
</dl>
</li>
</ul>
<a name="externalStorageAvailable--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>externalStorageAvailable</h4>
<pre>private&nbsp;boolean&nbsp;externalStorageAvailable()</pre>
<div class="block">Test for the presence of external storage.
 <p>
 isExternalStorageRemovable() only returns false if it is built-in.
 If it isn't built-in, check to see if some external storage has been mounted.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true iff external storage is present.</dd>
</dl>
</li>
</ul>
<a name="getEntry-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEntry</h4>
<pre>private&nbsp;<a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.Entry.html" title="class in com.barryholroyd.prodlisthpdemo.cache_disk">CacheDiskImage.Entry</a>&nbsp;getEntry(java.lang.String&nbsp;url)</pre>
<div class="block">Get the Entry for the specified URL.
 Create the Entry, if necessary.
 This does not have to be synchronized since all calls to it
 come from synchronized methods (get() and add()).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>url</code> - url of the image to be loaded.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Entry representing the image to be loaded.</dd>
</dl>
</li>
</ul>
<a name="trace-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>trace</h4>
<pre>private static&nbsp;void&nbsp;trace(java.lang.String&nbsp;msg)</pre>
<div class="block">Tracing method specific to the disk cache.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>msg</code> - message to be logged.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CacheDiskImage.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.Entry.html" title="class in com.barryholroyd.prodlisthpdemo.cache_disk"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/barryholroyd/prodlisthpdemo/cache_disk/CacheDiskImage.html" target="_top">Frames</a></li>
<li><a href="CacheDiskImage.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
